<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Minimax | Notes</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="Notes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="preload" href="/notes/assets/css/0.styles.fe0b5b61.css" as="style"><link rel="preload" href="/notes/assets/js/app.6c3b3bcb.js" as="script"><link rel="preload" href="/notes/assets/js/2.4924b588.js" as="script"><link rel="preload" href="/notes/assets/js/7.dd32a4b0.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.a5fbb6ee.js"><link rel="prefetch" href="/notes/assets/js/11.384b77fe.js"><link rel="prefetch" href="/notes/assets/js/12.312eff48.js"><link rel="prefetch" href="/notes/assets/js/13.35966966.js"><link rel="prefetch" href="/notes/assets/js/14.f52a882e.js"><link rel="prefetch" href="/notes/assets/js/15.f8b510cd.js"><link rel="prefetch" href="/notes/assets/js/16.948a27d3.js"><link rel="prefetch" href="/notes/assets/js/17.f0b9eebb.js"><link rel="prefetch" href="/notes/assets/js/18.437ac65d.js"><link rel="prefetch" href="/notes/assets/js/19.7ca92b4d.js"><link rel="prefetch" href="/notes/assets/js/20.f0a245c8.js"><link rel="prefetch" href="/notes/assets/js/21.667e8d6b.js"><link rel="prefetch" href="/notes/assets/js/22.029fd920.js"><link rel="prefetch" href="/notes/assets/js/23.59a78511.js"><link rel="prefetch" href="/notes/assets/js/24.c4f2188a.js"><link rel="prefetch" href="/notes/assets/js/25.71abeedc.js"><link rel="prefetch" href="/notes/assets/js/26.bbd247a1.js"><link rel="prefetch" href="/notes/assets/js/27.47543b5f.js"><link rel="prefetch" href="/notes/assets/js/28.c32c707b.js"><link rel="prefetch" href="/notes/assets/js/29.08335982.js"><link rel="prefetch" href="/notes/assets/js/3.fd904993.js"><link rel="prefetch" href="/notes/assets/js/30.ff5c03e1.js"><link rel="prefetch" href="/notes/assets/js/31.ae35627c.js"><link rel="prefetch" href="/notes/assets/js/32.807adfd6.js"><link rel="prefetch" href="/notes/assets/js/33.31272d30.js"><link rel="prefetch" href="/notes/assets/js/34.752cc0f0.js"><link rel="prefetch" href="/notes/assets/js/35.6e4a9448.js"><link rel="prefetch" href="/notes/assets/js/36.896273a3.js"><link rel="prefetch" href="/notes/assets/js/37.1d22eea8.js"><link rel="prefetch" href="/notes/assets/js/38.2e05eded.js"><link rel="prefetch" href="/notes/assets/js/39.59c51ea0.js"><link rel="prefetch" href="/notes/assets/js/4.4d19ee5a.js"><link rel="prefetch" href="/notes/assets/js/40.25f1eb42.js"><link rel="prefetch" href="/notes/assets/js/41.412adf9b.js"><link rel="prefetch" href="/notes/assets/js/42.659d9137.js"><link rel="prefetch" href="/notes/assets/js/43.59197c43.js"><link rel="prefetch" href="/notes/assets/js/44.1bc0f89e.js"><link rel="prefetch" href="/notes/assets/js/45.5018ca9c.js"><link rel="prefetch" href="/notes/assets/js/46.38c82577.js"><link rel="prefetch" href="/notes/assets/js/47.82162e52.js"><link rel="prefetch" href="/notes/assets/js/48.a3617bdc.js"><link rel="prefetch" href="/notes/assets/js/49.7a136de3.js"><link rel="prefetch" href="/notes/assets/js/5.48e512b1.js"><link rel="prefetch" href="/notes/assets/js/50.651f7c6f.js"><link rel="prefetch" href="/notes/assets/js/51.d0c96913.js"><link rel="prefetch" href="/notes/assets/js/6.fd491589.js"><link rel="prefetch" href="/notes/assets/js/8.b4d8c763.js"><link rel="prefetch" href="/notes/assets/js/9.a6aca158.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.fe0b5b61.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/software/" class="nav-link">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link router-link-active">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/software/" class="nav-link">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link router-link-active">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Misc.</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/others/characters.html" class="sidebar-link">常用特殊字符</a></li><li><a href="/notes/others/genetics.html" class="sidebar-link">遗传学知识回顾</a></li><li><a href="/notes/others/minimax.html" aria-current="page" class="active sidebar-link">Minimax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#问题定义" class="sidebar-link">问题定义</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#minimax-算法" class="sidebar-link">Minimax 算法</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#alpha-beta-剪枝" class="sidebar-link">Alpha-Beta 剪枝</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#阅读材料" class="sidebar-link">阅读材料</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="minimax"><a href="#minimax" class="header-anchor">#</a> Minimax</h1> <link rel="stylesheet" href="/notes/katex@0.11.1.min.css"> <p>Minimax 算法常用于「有限状态，零和，完全信息，两人」博弈问题，比如棋类</p> <h2 id="问题定义"><a href="#问题定义" class="header-anchor">#</a> 问题定义</h2> <ul><li><mark>状态</mark> <strong>state</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>∈</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">s \in S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>（棋盘的局面）</li> <li><mark>允许的动作</mark> <strong>actions</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A(s)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">A</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span>（即可以落子的点）</li> <li>The <mark>transition model</mark> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mspace></mspace><mspace width="0.1111111111111111em"></mspace><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333333333333333em"></mspace><mi>S</mi><mo>×</mo><mi>A</mi><mo>→</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">t(s, a) \colon S \times A \to S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">)</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111111111111111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:-0.16666666666666666em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>（比如黑白棋的翻转，围棋的提子）</li></ul> <p>这三者（其实也就是游戏规则）决定了 <strong>game tree</strong></p> <figure><img src="/notes/assets/img/game-tree.a8ccc95d.webp" alt=""> <figcaption>A branch of a game tree. (source: <a href="https://www.5dchesswithmultiversetimetravel.com/">5D Chess With Multiverse Time Travel</a>)</figcaption></figure> <ul><li><mark>效用函数</mark>，<strong>utility function</strong>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">u(s,p)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">u</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mclose">)</span></span></span></span>，（玩家 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>）在游戏结束时（状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>）获得的「收益」</li> <li>玩家需要的是一个<mark>策略</mark>，<strong>strategy</strong>，即在给定状态（棋局）下选择一个动作（落子）</li></ul> <h2 id="minimax-算法"><a href="#minimax-算法" class="header-anchor">#</a> Minimax 算法</h2> <p>在零和博弈的设定下，玩家一的目标为最大化自己的收益 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>max</mi><mo>⁡</mo><msub><mi>u</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\max u_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，玩家二的目标则等价于最小化玩家一的收益 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>min</mi><mo>⁡</mo><msub><mi>u</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\min u_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.81786em;vertical-align:-0.15em;"></span><span class="mop">min</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，方便起见分别称为 Max 和 Min。给定一个 game tree，最优策略可以由每个节点的 <strong>minimax 值</strong>决定</p> <ul><li><mark>Minimax 值</mark>，一个递归定义的值，表示从当前状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 开始，双方均采取最优策略直至游戏结束时玩家一（Max）的<strong>效用值</strong><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>minimax</mtext><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>u</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mtext mathvariant="monospace">Max</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if GameOver</mtext><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></msub><mtext>minimax</mtext><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal">′</mo></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mtext mathvariant="monospace">Max</mtext><mtext>’s turn</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mo><mi>min</mi><mo>⁡</mo></mo><mrow><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></msub><mtext>minimax</mtext><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal">′</mo></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mtext mathvariant="monospace">Min</mtext><mtext>’s turn</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\text{minimax}(s) = \begin{cases}
  u(s, \texttt{Max})                         &amp; \text{if GameOver}(s) \\
  \max_{a \in A(s)} \text{minimax}(s^\prime) &amp; \text{if }\texttt{Max}\text{'s turn} \\
  \min_{a \in A(s)}\text{minimax}(s^\prime) &amp; \text{if }\texttt{Min}\text{'s turn} \\
\end{cases}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">minimax</span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.19499em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.20499em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.15001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.2950099999999996em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.30501em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord text"><span class="mord texttt">Max</span></span><span class="mclose">)</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight">A</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord text"><span class="mord">minimax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mop"><span class="mop">min</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight">A</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord text"><span class="mord">minimax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if GameOver</span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord text"><span class="mord texttt">Max</span></span><span class="mord text"><span class="mord">’s turn</span></span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord text"><span class="mord texttt">Min</span></span><span class="mord text"><span class="mord">’s turn</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal">′</mo></msup><mo>=</mo><mi>t</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s^\prime=t(s,a)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mclose">)</span></span></span></span></li></ul> <p>从上述定义中不难看出，计算 minimax 值时需要沿着 game tree 一直推演（深度优先）至叶子节点（游戏结束），然后回溯计算出之前每个节点的值。一个节点只要计算出了 minimax 值，就已经看到了游戏的结局（效用值），假设对手（Min）也采取最优策略的话。而如果 Min 不采取最优策略，Max 仍然采取 minimax 策略，Max 的最终效用只会更高（不一定最优）。</p> <p>假设 game tree 的深度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>，每个节点有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span> 种走法，则该算法的时间复杂度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>b</mi><mi>m</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(b^m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，在实际情况中是不现实的。</p> <details class="custom-block details"><summary>Python 代码</summary> <div class="language-python extra-class"><pre class="shiki" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## https://github.com/aimacode/aima-python/blob/master/games.py</span></span>

<span class="line"><span style="color:#D73A49;">def</span><span style="color:#000000;"> </span><span style="color:#6F42C1;">minmax_decision</span><span style="color:#000000;">(</span><span style="color:#24292E;">state</span><span style="color:#000000;">, </span><span style="color:#24292E;">game</span><span style="color:#000000;">):</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#032F62;">&quot;&quot;&quot;Given a state in a game, calculate the best move by searching</span></span>
<span class="line"><span style="color:#032F62;">    forward all the way to the terminal states. [Figure 5.3]&quot;&quot;&quot;</span></span>

<span class="line"><span style="color:#000000;">    player </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> game.to_move(state)</span></span>

<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">def</span><span style="color:#000000;"> </span><span style="color:#6F42C1;">max_value</span><span style="color:#000000;">(</span><span style="color:#24292E;">state</span><span style="color:#000000;">):</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#000000;">        v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#D73A49;">-</span><span style="color:#000000;">np.inf</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">for</span><span style="color:#000000;"> a </span><span style="color:#D73A49;">in</span><span style="color:#000000;"> game.actions(state):</span></span>
<span class="line"><span style="color:#000000;">            v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">max</span><span style="color:#000000;">(v, min_value(game.result(state, a)))</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> v</span></span>

<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">def</span><span style="color:#000000;"> </span><span style="color:#6F42C1;">min_value</span><span style="color:#000000;">(</span><span style="color:#24292E;">state</span><span style="color:#000000;">):</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#000000;">        v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> np.inf</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">for</span><span style="color:#000000;"> a </span><span style="color:#D73A49;">in</span><span style="color:#000000;"> game.actions(state):</span></span>
<span class="line"><span style="color:#000000;">            v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">min</span><span style="color:#000000;">(v, max_value(game.result(state, a)))</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> v</span></span>

<span class="line"><span style="color:#000000;">    </span><span style="color:#6A737D;"># Body of minmax_decision:</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> </span><span style="color:#005CC5;">max</span><span style="color:#000000;">(game.actions(state), </span><span style="color:#E36209;">key</span><span style="color:#D73A49;">=lambda</span><span style="color:#000000;"> </span><span style="color:#24292E;">a</span><span style="color:#000000;">: min_value(game.result(state, a)))</span></span></code></pre></div></details> <h2 id="alpha-beta-剪枝"><a href="#alpha-beta-剪枝" class="header-anchor">#</a> Alpha-Beta 剪枝</h2> <p>假设我们当前处于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 节点，并且已经计算出了其一个<strong>直接子节点</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span> 的 minimax 值，那么对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 的其它<strong>后代节点</strong>，如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>「差于」<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 节点肯定不是最优路线了</p> <figure><img src="/notes/assets/img/alpha-beta-general-case.34a4bac8.png" alt=""> <figcaption>Alpha-beta 剪枝原理</figcaption></figure> <p>具体来说，对于一个 Max 节点（例如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>），每计算出一个子节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">m_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 都会更新 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 的下限（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>≥</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">s \ge \alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>），其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><mtext>max</mtext><mo stretchy="false">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mtext></mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\alpha=\text{max}(m_1,m_2,\dots)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">max</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mclose">)</span></span></span></span>。在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 还未探索的后代节点中，如果能够确定某个节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">n\le\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>，也就表明其肯定不是最优解，可以剪掉（无需再考察 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 的其它子节点）。而想要确定 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">n\le\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>，需要两个条件：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 是 Min 节点，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 的一个子节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mo mathvariant="normal">′</mo></msup><mo>≤</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">n^\prime\le\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.887862em;vertical-align:-0.13597em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>。</p> <p>同理，假如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 是 Min 节点，已知的子节点会确定 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> 的上限（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>≤</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">s \le \beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>），<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo>=</mo><mtext>min</mtext><mo stretchy="false">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mtext></mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\beta=\text{min}(m_1,m_2,\dots)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">min</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mclose">)</span></span></span></span>。剪枝只会发生在其后代的某个 Max 节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>，如果发现 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>≥</mo><mo stretchy="false">)</mo><mtext></mtext><msup><mi>n</mi><mo mathvariant="normal">′</mo></msup><mo>≥</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">(n\ge)\,n^\prime\ge\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>。</p> <p>每个节点的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span> 值继承于它的父节点。</p> <details class="custom-block details"><summary>Python 代码</summary> <div class="language-python extra-class"><pre class="shiki" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## https://github.com/aimacode/aima-python/blob/master/games.py</span></span>

<span class="line"><span style="color:#D73A49;">def</span><span style="color:#000000;"> </span><span style="color:#6F42C1;">alpha_beta_search</span><span style="color:#000000;">(</span><span style="color:#24292E;">state</span><span style="color:#000000;">, </span><span style="color:#24292E;">game</span><span style="color:#000000;">):</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#032F62;">&quot;&quot;&quot;Search game to determine best action; use alpha-beta pruning.</span></span>
<span class="line"><span style="color:#032F62;">    As in [Figure 5.7], this version searches all the way to the leaves.&quot;&quot;&quot;</span></span>

<span class="line"><span style="color:#000000;">    player </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> game.to_move(state)</span></span>

<span class="line"><span style="color:#000000;">    </span><span style="color:#6A737D;"># Functions used by alpha_beta</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">def</span><span style="color:#000000;"> </span><span style="color:#6F42C1;">max_value</span><span style="color:#000000;">(</span><span style="color:#24292E;">state</span><span style="color:#000000;">, </span><span style="color:#24292E;">alpha</span><span style="color:#000000;">, </span><span style="color:#24292E;">beta</span><span style="color:#000000;">):</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#000000;">        v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#D73A49;">-</span><span style="color:#000000;">np.inf</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">for</span><span style="color:#000000;"> a </span><span style="color:#D73A49;">in</span><span style="color:#000000;"> game.actions(state):</span></span>
<span class="line"><span style="color:#000000;">            v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">max</span><span style="color:#000000;">(v, min_value(game.result(state, a), alpha, beta))</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> v </span><span style="color:#D73A49;">&gt;=</span><span style="color:#000000;"> beta:</span></span>
<span class="line"><span style="color:#000000;">                </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> v</span></span>
<span class="line"><span style="color:#000000;">            alpha </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">max</span><span style="color:#000000;">(alpha, v)</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> v</span></span>

<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">def</span><span style="color:#000000;"> </span><span style="color:#6F42C1;">min_value</span><span style="color:#000000;">(</span><span style="color:#24292E;">state</span><span style="color:#000000;">, </span><span style="color:#24292E;">alpha</span><span style="color:#000000;">, </span><span style="color:#24292E;">beta</span><span style="color:#000000;">):</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#000000;">        v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> np.inf</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">for</span><span style="color:#000000;"> a </span><span style="color:#D73A49;">in</span><span style="color:#000000;"> game.actions(state):</span></span>
<span class="line"><span style="color:#000000;">            v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">min</span><span style="color:#000000;">(v, max_value(game.result(state, a), alpha, beta))</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> v </span><span style="color:#D73A49;">&lt;=</span><span style="color:#000000;"> alpha:</span></span>
<span class="line"><span style="color:#000000;">                </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> v</span></span>
<span class="line"><span style="color:#000000;">            beta </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">min</span><span style="color:#000000;">(beta, v)</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> v</span></span>

<span class="line"><span style="color:#000000;">    </span><span style="color:#6A737D;"># Body of alpha_beta_search:</span></span>
<span class="line"><span style="color:#000000;">    best_score </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#D73A49;">-</span><span style="color:#000000;">np.inf</span></span>
<span class="line"><span style="color:#000000;">    beta </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> np.inf</span></span>
<span class="line"><span style="color:#000000;">    best_action </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> </span><span style="color:#005CC5;">None</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">for</span><span style="color:#000000;"> a </span><span style="color:#D73A49;">in</span><span style="color:#000000;"> game.actions(state):</span></span>
<span class="line"><span style="color:#000000;">        v </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> min_value(game.result(state, a), best_score, beta)</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#D73A49;">if</span><span style="color:#000000;"> v </span><span style="color:#D73A49;">&gt;</span><span style="color:#000000;"> best_score:</span></span>
<span class="line"><span style="color:#000000;">            best_score </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> v</span></span>
<span class="line"><span style="color:#000000;">            best_action </span><span style="color:#D73A49;">=</span><span style="color:#000000;"> a</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#D73A49;">return</span><span style="color:#000000;"> best_action</span></span></code></pre></div></details> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>即使使用了 alpha-beta 剪枝，在实际中也基本不可能搜索到游戏结束，这就需要使用<strong>启发式</strong><mark>评估函数</mark>（heuristic evaluation function）来代替游戏最终的效用函数，这里不再展开。</p></div> <h2 id="阅读材料"><a href="#阅读材料" class="header-anchor">#</a> 阅读材料</h2> <ul><li>Russell, Stuart, and Peter Norvig. Artificial Intelligence: A Modern Approach. <em>Prentice Hall</em>. 3rd 2009. (Chapter 5: Adversarial Search)</li></ul> <p>扩展阅读</p> <ul><li>⭐ <a href="https://zhuanlan.zhihu.com/p/31809930" target="_blank" rel="noopener noreferrer">浅述：从 Minimax 到 AlphaZero，完全信息博弈之路<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last updated:</span> <span class="time">10/10/2020, 9:21:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/others/genetics.html" class="prev">
        遗传学知识回顾
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes/assets/js/app.6c3b3bcb.js" defer></script><script src="/notes/assets/js/2.4924b588.js" defer></script><script src="/notes/assets/js/7.dd32a4b0.js" defer></script>
  </body>
</html>
